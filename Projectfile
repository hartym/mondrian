# mondrian (see github.com/python-medikit)

from medikit import require

git = require('git')
make = require('make')
pytest = require('pytest')
python = require('python')
sphinx = require('sphinx')
yapf = require('yapf')

python.setup(
    name='mondrian',
    description='Logging with pretty coloured squares all over the place.',
    license='Apache License, Version 2.0',
    url='https://python-mondrian.github.io/',
    download_url='https://github.com/python-mondrian/mondrian/archive/{version}.tar.gz',
    author='Romain Dorgueil',
    author_email='romain@dorgueil.net',
)

python.add_requirements('colorama ~=0.3.7')


# Pipelines
@listen(make.on_generate)
def on_make_generate_pipelines(event):
    # Releases
    event.makefile.add_target(
        'release',
        '''
            python -c 'import medikit; print(medikit.__version__)' || pip install medikit;
            $(PYTHON) -m medikit pipeline release start
        ''',
        phony=True,
        doc='Releases mondrian.'
    )


# vim: ft=python:
